{% extends "base.html" %}

{% block title %}Test History{% endblock %}

{% block content %}
<div class="history-container">
    <h1>Your Test History</h1>
    
    {% if attempts %}
    <p class="summary">Total tests completed: {{ test_count }}</p>
    
    <div class="attempts-list">
        {% for attempt in attempts %}
        <div class="attempt-card {{ attempt.result.lower() }}">
            <div class="attempt-header">
                <span class="date">{{ attempt.timestamp.strftime('%Y-%m-%d %H:%M') }}</span>
                <span class="score">{{ attempt.score }}% ({{ attempt.result }})</span>
            </div>
            
            <div class="attempt-details">
                <h3>Question Responses:</h3>
                <div class="answers-grid">
                    {% for answer in attempt.answers|sort(attribute='question_id') %}
                    <div class="answer-item">
                        <span class="question">Q{{ answer.question_id }}:</span>
                        <span class="response {{ 'agree' if answer.answer else 'disagree' }}">
                            {{ 'Agree' if answer.answer else 'Disagree' }}
                        </span>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="no-history">
        <p>No test history found.</p>
        <a href="{{ url_for('test_intro') }}" class="btn-primary">
            Take Your First Test
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}